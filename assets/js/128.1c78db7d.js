(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{329:function(t,s,a){"use strict";a.r(s);var n=a(10),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"webpack-module-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-module-配置"}},[t._v("#")]),t._v(" webpack module 配置")]),t._v(" "),a("h2",{attrs:{id:"webpack-模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-模块"}},[t._v("#")]),t._v(" webpack 模块")]),t._v(" "),a("p",[t._v("模块：")]),t._v(" "),a("ul",[a("li",[t._v("ES2015 import 语句")]),t._v(" "),a("li",[t._v("CommonJS require() 语句")]),t._v(" "),a("li",[t._v("AMD define 和 require 语句")]),t._v(" "),a("li",[t._v("css/sass/less 文件中的 @import 语句。")]),t._v(" "),a("li",[t._v("样式(url(...))或 HTML 文件("),a("code",[t._v("<img src=...>")]),t._v(")中的图片链接(image url)")])]),t._v(" "),a("p",[t._v("类型：")]),t._v(" "),a("ul",[a("li",[t._v("CoffeeScript")]),t._v(" "),a("li",[t._v("TypeScript")]),t._v(" "),a("li",[t._v("ESNext (Babel)")]),t._v(" "),a("li",[t._v("Sass")]),t._v(" "),a("li",[t._v("Less")]),t._v(" "),a("li",[t._v("Stylus")])]),t._v(" "),a("p",[t._v("解析规则：")]),t._v(" "),a("ul",[a("li",[t._v("绝对路径 -> 直接解析")]),t._v(" "),a("li",[t._v("相对路径 -> 根据上下文目录，以产生模块的绝对路径(absolute path)。")]),t._v(" "),a("li",[t._v("模块路径\n"),a("ul",[a("li",[t._v("模块将在 "),a("code",[t._v("resolve.modules")]),t._v(" 中指定的所有目录内搜索。 你可以替换初始模块路径，此替换路径通过使用 "),a("code",[t._v("resolve.alias")]),t._v(" 配置选项来创建一个别名。")]),t._v(" "),a("li",[t._v("如果路径指向一个文件\n"),a("ul",[a("li",[t._v("如果路径具有文件扩展名，则被直接将文件打包")]),t._v(" "),a("li",[t._v("否则，将使用 [resolve.extensions] 选项作为文件扩展名来解析，此选项告诉解析器在解析中能够接受哪些扩展名（例如 "),a("code",[t._v(".js, .jsx")]),t._v("）")])])]),t._v(" "),a("li",[t._v("如果路径指向一个文件夹，则采取以下步骤找到具有正确扩展名的正确文件\n"),a("ul",[a("li",[t._v("如果文件夹中包含 package.json 文件，则按照顺序查找 resolve.mainFields 配置选项中指定的字段。并且 package.json 中的第一个这样的字段确定文件路径")]),t._v(" "),a("li",[t._v("如果 package.json 文件不存在或者 package.json 文件中的 main 字段没有返回一个有效路径，则按照顺序查找 resolve.mainFiles 配置选项中指定的文件名，看是否能在 import/require 目录下匹配到一个存在的文件名。")]),t._v(" "),a("li",[t._v("文件扩展名通过 resolve.extensions 选项采用类似的方法进行解析")])])])])])]),t._v(" "),a("p",[t._v("解析 Loader")]),t._v(" "),a("ul",[a("li",[t._v("配置的 loader")])]),t._v(" "),a("p",[t._v("缓存")]),t._v(" "),a("ul",[a("li",[t._v("每个文件系统访问都被缓存，以便更快触发对同一文件的多个并行或串行请求。在观察模式下，只有修改过的文件会从缓存中摘出。如果关闭观察模式，在每次编译前清理缓存。")])]),t._v(" "),a("h2",{attrs:{id:"module-noparse"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#module-noparse"}},[t._v("#")]),t._v(" module.noParse")]),t._v(" "),a("p",[t._v("不解析，防止 "),a("code",[t._v("webpack")]),t._v(" 解析那些任何与给定正则表达式相匹配的文件。忽略的文件中不应该含有 "),a("code",[t._v("import, require, define")]),t._v(" 的调用，或任何其他导入机制。忽略大型的 "),a("code",[t._v("library")]),t._v(" 可以提高构建性能")]),t._v(" "),a("h2",{attrs:{id:"module-rules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#module-rules"}},[t._v("#")]),t._v(" module.rules")]),t._v(" "),a("p",[t._v("每个规则可以分为三部分:")]),t._v(" "),a("ul",[a("li",[t._v("条件(condition)")]),t._v(" "),a("li",[t._v("结果(result)")]),t._v(" "),a("li",[t._v("嵌套规则(nested rule)。")])]),t._v(" "),a("p",[t._v("创建模块时，匹配请求的规则数组。这些规则能够修改模块的创建方式。这些规则能够对模块 "),a("code",[t._v("module")]),t._v(" 应用 "),a("code",[t._v("loader")]),t._v("，或者修改解析器"),a("code",[t._v("parser")])]),t._v(" "),a("h3",{attrs:{id:"rule-use-rule-test"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rule-use-rule-test"}},[t._v("#")]),t._v(" Rule.use & Rule.test")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("use")]),t._v(" "),a("ul",[a("li",[t._v("每个入口(entry)指定使用一个 loader")])])]),t._v(" "),a("li",[a("p",[t._v("test")]),t._v(" "),a("ul",[a("li",[t._v("字符串：匹配输入必须以提供的字符串开始。是的。目录绝对路径或文件绝对路径。")]),t._v(" "),a("li",[t._v("正则表达式：test 输入值。")]),t._v(" "),a("li",[t._v("函数：调用输入的函数，必须返回一个真值(truthy value)以匹配。")]),t._v(" "),a("li",[t._v("条件数组：至少一个匹配条件。")]),t._v(" "),a("li",[t._v("对象：匹配所有属性。每个属性都有一个定义行为")])])]),t._v(" "),a("li",[a("p",[t._v("Rule.options")]),t._v(" "),a("ul",[a("li",[t._v("Rule.use: [ { options } ] 的简写")])])])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"path"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    app"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./src/app.js"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    publicPath"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" __dirname "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/dist/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dist"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"[name].bundle.js"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  module"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/\\.css$/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 针对CSS结尾的文件设置LOADER")]),t._v("\n        use"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            loader"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"style-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            options"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              singleton"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 处理为单个style标签")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            loader"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"css-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            options"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              minimize"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// css代码压缩")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        include"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n          path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app/styles"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vendor/styles"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"rule-include"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rule-include"}},[t._v("#")]),t._v(" Rule.include")]),t._v(" "),a("p",[a("code",[t._v("{ include: Condition }")]),t._v("：匹配特定条件。一般是提供一个字符串或者字符串数组，但这不是强制的")]),t._v(" "),a("h3",{attrs:{id:"rule-exclude"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rule-exclude"}},[t._v("#")]),t._v(" Rule.exclude")]),t._v(" "),a("p",[a("code",[t._v("{ exclude: Condition }")]),t._v("：排除特定条件。一般是提供一个字符串或字符串数组，但这不是强制的")])])}),[],!1,null,null,null);s.default=e.exports}}]);