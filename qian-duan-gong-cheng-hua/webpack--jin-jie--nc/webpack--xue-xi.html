<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Webpack-Webpack 配置 | 深入前端学习</title>
    <meta name="description" content="前端进阶学习 JavaScript数据结构 前端工程化">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/icon.png">
    
    <link rel="preload" href="/assets/css/0.styles.eb71d6de.css" as="style"><link rel="preload" href="/assets/js/app.d97aa468.js" as="script"><link rel="preload" href="/assets/js/2.b8ed37c3.js" as="script"><link rel="preload" href="/assets/js/125.b240ed72.js" as="script"><link rel="prefetch" href="/assets/js/10.b0fbc02d.js"><link rel="prefetch" href="/assets/js/100.685ae5d3.js"><link rel="prefetch" href="/assets/js/101.59d1e30a.js"><link rel="prefetch" href="/assets/js/102.a9bcb575.js"><link rel="prefetch" href="/assets/js/103.e9a27594.js"><link rel="prefetch" href="/assets/js/104.d5215480.js"><link rel="prefetch" href="/assets/js/105.ba47f600.js"><link rel="prefetch" href="/assets/js/106.2813c78b.js"><link rel="prefetch" href="/assets/js/107.4d85a99f.js"><link rel="prefetch" href="/assets/js/108.746d42dc.js"><link rel="prefetch" href="/assets/js/109.e1e7eac5.js"><link rel="prefetch" href="/assets/js/11.89d2dd9d.js"><link rel="prefetch" href="/assets/js/110.b84ad071.js"><link rel="prefetch" href="/assets/js/111.be521518.js"><link rel="prefetch" href="/assets/js/112.c5f3ecf2.js"><link rel="prefetch" href="/assets/js/113.ac6eb011.js"><link rel="prefetch" href="/assets/js/114.26fb9e49.js"><link rel="prefetch" href="/assets/js/115.6868f2b3.js"><link rel="prefetch" href="/assets/js/116.785f4db8.js"><link rel="prefetch" href="/assets/js/117.bd2cabf4.js"><link rel="prefetch" href="/assets/js/118.d97ae399.js"><link rel="prefetch" href="/assets/js/119.c4048771.js"><link rel="prefetch" href="/assets/js/12.e4cc17b5.js"><link rel="prefetch" href="/assets/js/120.d1ea8260.js"><link rel="prefetch" href="/assets/js/121.928a203a.js"><link rel="prefetch" href="/assets/js/122.72894fa4.js"><link rel="prefetch" href="/assets/js/123.2d6925fa.js"><link rel="prefetch" href="/assets/js/124.4bdcc56e.js"><link rel="prefetch" href="/assets/js/126.e8210ef2.js"><link rel="prefetch" href="/assets/js/127.90cda23d.js"><link rel="prefetch" href="/assets/js/128.1c78db7d.js"><link rel="prefetch" href="/assets/js/129.403aee79.js"><link rel="prefetch" href="/assets/js/13.b78d5fb2.js"><link rel="prefetch" href="/assets/js/130.9138708f.js"><link rel="prefetch" href="/assets/js/131.6f81fb6c.js"><link rel="prefetch" href="/assets/js/132.f1f66b6b.js"><link rel="prefetch" href="/assets/js/133.6c00ecd2.js"><link rel="prefetch" href="/assets/js/134.0f1cfc85.js"><link rel="prefetch" href="/assets/js/135.0458c13e.js"><link rel="prefetch" href="/assets/js/136.82db2f57.js"><link rel="prefetch" href="/assets/js/137.744d25fb.js"><link rel="prefetch" href="/assets/js/138.ae30d999.js"><link rel="prefetch" href="/assets/js/139.6aba53d1.js"><link rel="prefetch" href="/assets/js/14.b42e94f3.js"><link rel="prefetch" href="/assets/js/140.4d922eac.js"><link rel="prefetch" href="/assets/js/141.f590e842.js"><link rel="prefetch" href="/assets/js/142.cd20ae34.js"><link rel="prefetch" href="/assets/js/143.3420d1b6.js"><link rel="prefetch" href="/assets/js/144.fcb5e2d0.js"><link rel="prefetch" href="/assets/js/145.c84cdbfc.js"><link rel="prefetch" href="/assets/js/146.4d387e18.js"><link rel="prefetch" href="/assets/js/147.536309ca.js"><link rel="prefetch" href="/assets/js/15.92eba5b1.js"><link rel="prefetch" href="/assets/js/16.8c2832cb.js"><link rel="prefetch" href="/assets/js/17.bb7047e5.js"><link rel="prefetch" href="/assets/js/18.37d50f55.js"><link rel="prefetch" href="/assets/js/19.9c2a5d3d.js"><link rel="prefetch" href="/assets/js/20.18e13265.js"><link rel="prefetch" href="/assets/js/21.4c2b2be5.js"><link rel="prefetch" href="/assets/js/22.3be056b6.js"><link rel="prefetch" href="/assets/js/23.b86e836f.js"><link rel="prefetch" href="/assets/js/24.22693865.js"><link rel="prefetch" href="/assets/js/25.c84ceb92.js"><link rel="prefetch" href="/assets/js/26.3bbbc299.js"><link rel="prefetch" href="/assets/js/27.28742116.js"><link rel="prefetch" href="/assets/js/28.d24e2669.js"><link rel="prefetch" href="/assets/js/29.7726e760.js"><link rel="prefetch" href="/assets/js/3.db315dd8.js"><link rel="prefetch" href="/assets/js/30.3579f6a8.js"><link rel="prefetch" href="/assets/js/31.bd027530.js"><link rel="prefetch" href="/assets/js/32.5b726e59.js"><link rel="prefetch" href="/assets/js/33.68530bc9.js"><link rel="prefetch" href="/assets/js/34.126a2ae6.js"><link rel="prefetch" href="/assets/js/35.251c4687.js"><link rel="prefetch" href="/assets/js/36.67e141a8.js"><link rel="prefetch" href="/assets/js/37.a2314517.js"><link rel="prefetch" href="/assets/js/38.a11ede48.js"><link rel="prefetch" href="/assets/js/39.3b7062d3.js"><link rel="prefetch" href="/assets/js/4.bee55229.js"><link rel="prefetch" href="/assets/js/40.485cda16.js"><link rel="prefetch" href="/assets/js/41.ef2f00a4.js"><link rel="prefetch" href="/assets/js/42.2fcba9a8.js"><link rel="prefetch" href="/assets/js/43.a56d6409.js"><link rel="prefetch" href="/assets/js/44.8fa34dd4.js"><link rel="prefetch" href="/assets/js/45.599c1832.js"><link rel="prefetch" href="/assets/js/46.aa317726.js"><link rel="prefetch" href="/assets/js/47.0dcef552.js"><link rel="prefetch" href="/assets/js/48.e93bbc24.js"><link rel="prefetch" href="/assets/js/49.c93cd259.js"><link rel="prefetch" href="/assets/js/5.d2697518.js"><link rel="prefetch" href="/assets/js/50.d177bd7c.js"><link rel="prefetch" href="/assets/js/51.229a8cf5.js"><link rel="prefetch" href="/assets/js/52.56c1077e.js"><link rel="prefetch" href="/assets/js/53.0c7ed22b.js"><link rel="prefetch" href="/assets/js/54.09d6218c.js"><link rel="prefetch" href="/assets/js/55.3fb26d1d.js"><link rel="prefetch" href="/assets/js/56.285a3681.js"><link rel="prefetch" href="/assets/js/57.1706492c.js"><link rel="prefetch" href="/assets/js/58.fd62bdd2.js"><link rel="prefetch" href="/assets/js/59.4da5b13b.js"><link rel="prefetch" href="/assets/js/6.36fa39fd.js"><link rel="prefetch" href="/assets/js/60.27cb5d2e.js"><link rel="prefetch" href="/assets/js/61.e011772a.js"><link rel="prefetch" href="/assets/js/62.38aedaaf.js"><link rel="prefetch" href="/assets/js/63.98c2a33a.js"><link rel="prefetch" href="/assets/js/64.d3e75daa.js"><link rel="prefetch" href="/assets/js/65.9f2e9db6.js"><link rel="prefetch" href="/assets/js/66.81c476bd.js"><link rel="prefetch" href="/assets/js/67.2779a28e.js"><link rel="prefetch" href="/assets/js/68.8b6a13c9.js"><link rel="prefetch" href="/assets/js/69.c4f8c7eb.js"><link rel="prefetch" href="/assets/js/7.f222a103.js"><link rel="prefetch" href="/assets/js/70.6d8d9eae.js"><link rel="prefetch" href="/assets/js/71.ed91af88.js"><link rel="prefetch" href="/assets/js/72.8d71392a.js"><link rel="prefetch" href="/assets/js/73.ca4057b9.js"><link rel="prefetch" href="/assets/js/74.46c4f123.js"><link rel="prefetch" href="/assets/js/75.7863258d.js"><link rel="prefetch" href="/assets/js/76.115088e5.js"><link rel="prefetch" href="/assets/js/77.1a327075.js"><link rel="prefetch" href="/assets/js/78.c2298758.js"><link rel="prefetch" href="/assets/js/79.0a9f8f83.js"><link rel="prefetch" href="/assets/js/8.944513ba.js"><link rel="prefetch" href="/assets/js/80.31c21877.js"><link rel="prefetch" href="/assets/js/81.814e5c34.js"><link rel="prefetch" href="/assets/js/82.23fc2de5.js"><link rel="prefetch" href="/assets/js/83.18e43aa8.js"><link rel="prefetch" href="/assets/js/84.56eeaefd.js"><link rel="prefetch" href="/assets/js/85.2802cf7e.js"><link rel="prefetch" href="/assets/js/86.553e6872.js"><link rel="prefetch" href="/assets/js/87.6bb9f1f5.js"><link rel="prefetch" href="/assets/js/88.2655130a.js"><link rel="prefetch" href="/assets/js/89.6be9a833.js"><link rel="prefetch" href="/assets/js/9.994351b2.js"><link rel="prefetch" href="/assets/js/90.a66e656f.js"><link rel="prefetch" href="/assets/js/91.27408d28.js"><link rel="prefetch" href="/assets/js/92.8b3bf2f2.js"><link rel="prefetch" href="/assets/js/93.587e74cf.js"><link rel="prefetch" href="/assets/js/94.23984853.js"><link rel="prefetch" href="/assets/js/95.365bca71.js"><link rel="prefetch" href="/assets/js/96.60b49af2.js"><link rel="prefetch" href="/assets/js/97.cc728fc4.js"><link rel="prefetch" href="/assets/js/98.d666ccff.js"><link rel="prefetch" href="/assets/js/99.b011d256.js">
    <link rel="stylesheet" href="/assets/css/0.styles.eb71d6de.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">深入前端学习</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/html-yucss/" class="nav-link">
  Html与css
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/javascript-jin-jie/" class="nav-link">
  Javascript进阶
</a></div><div class="nav-item"><a href="/http/" class="nav-link">
  Http
</a></div><div class="nav-item"><a href="/qian-duan-gong-cheng-hua/" class="nav-link router-link-active">
  前端工程化
</a></div><div class="nav-item"><a href="/qi-ta/" class="nav-link">
  其他
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/html-yucss/" class="nav-link">
  Html与css
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/javascript-jin-jie/" class="nav-link">
  Javascript进阶
</a></div><div class="nav-item"><a href="/http/" class="nav-link">
  Http
</a></div><div class="nav-item"><a href="/qian-duan-gong-cheng-hua/" class="nav-link router-link-active">
  前端工程化
</a></div><div class="nav-item"><a href="/qi-ta/" class="nav-link">
  其他
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/qian-duan-gong-cheng-hua/" class="sidebar-link">前端工程化</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Webpack 进阶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--xue-xi.html" class="active sidebar-link">Webpack-Webpack 配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--xue-xi.html#安装和初始化" class="sidebar-link">安装和初始化</a></li><li class="sidebar-sub-header"><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--xue-xi.html#配置文件" class="sidebar-link">配置文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--xue-xi.html#babel" class="sidebar-link">babel</a></li><li class="sidebar-sub-header"><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--xue-xi.html#新建配置文件" class="sidebar-link">新建配置文件</a></li><li class="sidebar-sub-header"><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--xue-xi.html#清理-dist-文件夹" class="sidebar-link">清理 /dist 文件夹</a></li><li class="sidebar-sub-header"><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--xue-xi.html#模块热替换" class="sidebar-link">模块热替换</a></li><li class="sidebar-sub-header"><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--xue-xi.html#redux" class="sidebar-link">redux</a></li><li class="sidebar-sub-header"><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--xue-xi.html#react-loadable" class="sidebar-link">react-loadable</a></li><li class="sidebar-sub-header"><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--xue-xi.html#axios-统一拦截所有的请求和返回数据" class="sidebar-link">axios 统一拦截所有的请求和返回数据</a></li><li class="sidebar-sub-header"><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--xue-xi.html#公共路径-public-path" class="sidebar-link">公共路径(public path)</a></li></ul></li><li class="sidebar-sub-header"><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--xue-xi.html#插件配置" class="sidebar-link">插件配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--xue-xi.html#html-webpack-plugin" class="sidebar-link">html-webpack-plugin</a></li><li class="sidebar-sub-header"><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--xue-xi.html#copy-webpack-plugin" class="sidebar-link">copy-webpack-plugin</a></li><li class="sidebar-sub-header"><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--xue-xi.html#clean-webpack-plugin" class="sidebar-link">clean-webpack-plugin</a></li><li class="sidebar-sub-header"><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--xue-xi.html#webpack-bundle-analyzer" class="sidebar-link">webpack-bundle-analyzer</a></li><li class="sidebar-sub-header"><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--xue-xi.html#mini-css-extract-plugin" class="sidebar-link">mini-css-extract-plugin</a></li></ul></li><li class="sidebar-sub-header"><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--xue-xi.html#附上三个配置文件" class="sidebar-link">附上三个配置文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--xue-xi.html#webpack-dev-conf-js" class="sidebar-link">webpack.dev.conf.js</a></li><li class="sidebar-sub-header"><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--xue-xi.html#webpack-dll-conf-js" class="sidebar-link">webpack.dll.conf.js</a></li><li class="sidebar-sub-header"><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--xue-xi.html#webpack-prod-conf-js" class="sidebar-link">webpack.prod.conf.js</a></li></ul></li><li class="sidebar-sub-header"><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--xue-xi.html#学习过程中的踩坑" class="sidebar-link">学习过程中的踩坑</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--xue-xi.html#生产环境打包报错" class="sidebar-link">生产环境打包报错</a></li></ul></li></ul></li><li><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpck--jie-shao.html" class="sidebar-link">webpack 介绍</a></li><li><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack-output-pei-zhi.html" class="sidebar-link">webpack output-配置</a></li><li><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack-module-pei-zhi.html" class="sidebar-link">webpack module 配置</a></li><li><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack-resolve-pei-zhi.html" class="sidebar-link">webpack resolve 配置</a></li><li><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack-plugins-lie-biao.html" class="sidebar-link">webpck plugins 列表</a></li><li><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack-externals-pei-zhi.html" class="sidebar-link">webpack externals 配置</a></li><li><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack-devtool-shuo-ming.html" class="sidebar-link">webpack devtool 说明</a></li><li><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack-devserver-pei-zhi.html" class="sidebar-link">webpack devServer 配置</a></li><li><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack-watch-watchoptions.html" class="sidebar-link">webpack watch&amp;watchOptions</a></li><li><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--shi-xian-yi-geplugin.html" class="sidebar-link">webpack 实现一个 plugin</a></li><li><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack--shi-xian-yi-geloader.html" class="sidebar-link">webpack 实现一个 loader</a></li><li><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack-tree-shaking.html" class="sidebar-link">webpack tree-shaking 配置</a></li><li><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpack-loader-heplugin-qu-bie.html" class="sidebar-link">webpack-loader 和 plugin 区别</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Git使用</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/qian-duan-gong-cheng-hua/git-shi-yong--nc/git-rebase.html" class="sidebar-link">Git-git rebase</a></li><li><a href="/qian-duan-gong-cheng-hua/git-shi-yong--nc/git-stash.html" class="sidebar-link">git stash 学习</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webpack-webpack-配置"><a href="#webpack-webpack-配置" class="header-anchor">#</a> Webpack-Webpack 配置</h1> <h2 id="安装和初始化"><a href="#安装和初始化" class="header-anchor">#</a> 安装和初始化</h2> <p>首先附上官方的<a href="https://www.webpackjs.com/guides/" target="_blank" rel="noopener noreferrer">文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>github 地址</p> <blockquote><p><a href="https://github.com/xiaopingzhang0207/webpack4-react-redux-router-antd" target="_blank" rel="noopener noreferrer">https://github.com/xiaopingzhang0207/webpack4-react-redux-router-antd<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>会不定时更新,如果觉得有帮助到你，给个 Star 当做鼓励可好。</p> <div class="language-ls extra-class"><pre class="language-text"><code>.
├── README.md
├── build
│   ├── webpack.dev.conf.js
│   ├── webpack.dll.conf.js
│   └── webpack.prod.conf.js
├── dist
├── dll
├── manifest.json
├── package-lock.json
├── package.json
├── public
│   ├── favicon.ico
│   └── index.html
├── src
│   ├── components
│   │   ├── Bread
│   │   │   └── Bread.js
│   │   └── SiderBar
│   │       └── SiderBar.js
│   ├── index.js
│   ├── layouts
│   │   └── BasicLayout.js
│   ├── pages
│   │   ├── Counter
│   │   │   └── Counter.js
│   │   └── Home
│   │       └── Home.js
│   ├── redux
│   │   ├── actions
│   │   │   └── counter.js
│   │   ├── reducer.js
│   │   ├── reducers
│   │   │   └── counter.js
│   │   └── store.js
│   ├── request
│   │   └── request.js
│   ├── router
│   │   └── Router.js
│   └── util
│       └── loadable.js
└── yarn.lock
</code></pre></div><ol><li>新创建一个目录并初始化 npm，在本地安装<code>webpack</code>，再安装<code>webpack-cli</code></li></ol> <div class="language-npm extra-class"><pre class="language-text"><code>&gt;npm init

This utility will walk you through creating a package.json file.
It only covers the most common items, and tries to guess sensible defaults.

See `npm help json` for definitive documentation on these fields
and exactly what they do.

Use `npm install &lt;pkg&gt;` afterwards to install a package and
save it as a dependency in the package.json file.

Press ^C at any time to quit.
package name: (webpack4)
version: (1.0.0)
description:
entry point: (index.js)
test command:
git repository:
keywords:
author:
license: (ISC)
About to write to /Users/xiaopingzhang/UCloud/webpack4/package.json:

{
  &quot;name&quot;: &quot;webpack4&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
  },
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;
}


Is this OK? (yes) yes

```npm
初始化之后按照提示一步步往下就可以了，可以输入该项目的描述等等信息。一开始也没有关系，后面也还可以更改。

下一步 本地安装`webpack`，再安装`webpack-cli`
```npm
npm install webpack webpack-cli --save-dev
</code></pre></div><p><strong>==<code>--save-dev</code> 是你开发时候依赖的东西，<code>--save</code> 是你发布之后还依赖的东西。==</strong></p> <div class="language-npm extra-class"><pre class="language-text"><code>&gt;npm install webpack webpack-cli --save-dev

&gt; fsevents@1.2.7 install /Users/xiaopingzhang/UCloud/webpack4/node_modules/fsevents
&gt; node install

node-pre-gyp WARN Using needle for node-pre-gyp https download
[fsevents] Success: &quot;/Users/xiaopingzhang/UCloud/webpack4/node_modules/fsevents/
lib/binding/Release/node-v57-darwin-x64/fse.node&quot; is installed via remote

&gt; webpack-cli@3.2.1 postinstall /Users/xiaopingzhang/UCloud/webpack4/node_modules/webpack-cli
&gt; lightercollective


     *** Thank you for using webpack-cli! ***

Please consider donating to our open collective
     to help us maintain this package.

  https://opencollective.com/webpack/donate

                    ***

npm WARN webpack4@1.0.0 No description
npm WARN webpack4@1.0.0 No repository field.

+ webpack-cli@3.2.1
+ webpack@4.29.0
added 458 packages from 239 contributors and audited 5208 packages in 18.624s
found 0 vulnerabilities
</code></pre></div><p>安装好之后，也会显示安装的哪个版本，一般安装没有啥问题。实在安装不成功，试一下全局安装。</p> <p>2.新建<code>src</code>文件夹，入口的<code>js</code>文件和<code>html</code>文件。</p> <div class="language-ls extra-class"><pre class="language-text"><code>.
├── index.html
├── package.json
└── src
    └── index.js
</code></pre></div><p>index.js 文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">component</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;webpackworks&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> element<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>index.html</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Start<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./dist/main.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>3.学会使用 webpack 编译文件</p> <p>输入 <code>npx webpack</code></p> <div class="language-npm extra-class"><pre class="language-text"><code>&gt;npx webpack

Hash: 9ad2a368debc9967c1f4
Version: webpack 4.29.0
Time: 269ms
Built at: 2019-01-27 21:15:22
  Asset      Size  Chunks             Chunk Names
main.js  1.01 KiB       0  [emitted]  main
Entrypoint main = main.js
[0] ./src/index.js 218 bytes {0} [built]

WARNING in configuration
The 'mode' option has not been set,
 webpack will fallback to 'production' for this value.
Set 'mode' option to 'development' or 'production' to enable defaults for each environment.
You can also set it to 'none' to disable any default behavior. Learn more: https://webpack.js.org/concepts/mode/
</code></pre></div><p>再用浏览器打开<code>index.html</code>，查看网页是否正常的显示了。</p> <p><strong>webpack 把入口文件 <code>index.js</code> 经过处理之后，生成 <code>main.js</code></strong></p> <h2 id="配置文件"><a href="#配置文件" class="header-anchor">#</a> 配置文件</h2> <p>经过第一部分的尝试，已经初步了解<code>webpack</code>的作用，这一部分通过配置文件进行相应的一些设置。</p> <h3 id="babel"><a href="#babel" class="header-anchor">#</a> babel</h3> <blockquote><p>Babel 把用最新标准编写的 JavaScript 代码向下编译成可以在今天随处可用的版本。
这一过程叫做“源码到源码”编译， 也被称为转换编译。</p></blockquote> <div class="language-npm extra-class"><pre class="language-text"><code>npm install --save-dev

babel-core
babel-loader
babel-preset-es2015
babel-preset-react
babel-preset-stage-0

</code></pre></div><p>新建 babel 配置文件.babelrc</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
   <span class="token string">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
     <span class="token string">&quot;es2015&quot;</span><span class="token punctuation">,</span>
     <span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span>
     <span class="token string">&quot;stage-0&quot;</span>
   <span class="token punctuation">]</span><span class="token punctuation">,</span>
   <span class="token string">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">//babel-core 调用Babel的API进行转码</span>
<span class="token comment">//babel-loader</span>
<span class="token comment">//babel-preset-es2015 用于解析 ES6</span>
<span class="token comment">//babel-preset-react 用于解析 JSX</span>
<span class="token comment">//babel-preset-stage-0 用于解析 ES7 提案</span>
</code></pre></div><h3 id="新建配置文件"><a href="#新建配置文件" class="header-anchor">#</a> 新建配置文件</h3> <div class="language-npm extra-class"><pre class="language-text"><code>webpack.base.conf.js

webpack.dev.conf.js

webpack.prod.conf.js
</code></pre></div><p>分别是公共配置，开发配置，生产配置。
目前目录结构为</p> <div class="language-ls extra-class"><pre class="language-text"><code>.
├── build
│   ├── webpack.base.conf.js
│   ├── webpack.dev.conf.js
│   └── webpack.prod.conf.js
├── dist
│   └── main.js
├── index.html
├── package.json
└── src
    └── index.js
</code></pre></div><h4 id="加载-js-jsx-文件"><a href="#加载-js-jsx-文件" class="header-anchor">#</a> 加载 js/jsx 文件</h4> <div class="language-npm extra-class"><pre class="language-text"><code>npm install --save-dev

babel-core
babel-loader
babel-preset-es2015
babel-preset-react
babel-preset-stage-0

</code></pre></div><p>在 src 目录下新建<code>.babelrc</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">&quot;env&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token string">&quot;targets&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">&quot;browsers&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&gt;1%&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;last 3 versions&quot;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;stage-2&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;latest&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;react&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;syntax-dynamic-import&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;transform-class-properties&quot;</span><span class="token punctuation">,</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token punctuation">[</span><span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>  <span class="token string">&quot;import&quot;</span><span class="token punctuation">,</span><span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>  <span class="token punctuation">{</span><span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>    <span class="token string">&quot;libraryName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;antd&quot;</span><span class="token punctuation">,</span><span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>    <span class="token string">&quot;libraryDirectory&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es&quot;</span><span class="token punctuation">,</span><span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>    <span class="token string">&quot;style&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token comment">// &quot;style&quot;: &quot;css&quot; //主题设置</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>  <span class="token punctuation">}</span><span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token punctuation">]</span><span class="token operator">--</span><span class="token operator">&gt;</span>
    不用antd 可以去掉
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>


</code></pre></div><p>文件新增</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(js|jsx)$/</span><span class="token punctuation">,</span>
        exclude<span class="token operator">:</span> <span class="token regex">/(node_modules|bower_components)/</span><span class="token punctuation">,</span> <span class="token comment">//排除</span>
        include<span class="token operator">:</span> <span class="token punctuation">[</span>
          path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src'</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//包括</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">'babel-loader'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="加载-css-文件"><a href="#加载-css-文件" class="header-anchor">#</a> 加载 CSS 文件</h4> <div class="language-npm extra-class"><pre class="language-text"><code>npm install --save-dev style-loader css-loader
</code></pre></div><p>在配置文件里添加</p> <div class="language-js extra-class"><pre class="language-js"><code>      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
</code></pre></div><h4 id="加载图片"><a href="#加载图片" class="header-anchor">#</a> 加载图片</h4> <div class="language-npm extra-class"><pre class="language-text"><code>npm install --save-dev url-loader file-loader
</code></pre></div><p>在配置文件里添加</p> <div class="language-js extra-class"><pre class="language-js"><code>      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              limit<span class="token operator">:</span> <span class="token number">8192</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
</code></pre></div><p><code>options limit:8192</code>意思是，小于等于 8K 的图片会被转成 base64 编码，直接插入 HTML 中，减少 HTTP 请求。</p> <h4 id="加载-less"><a href="#加载-less" class="header-anchor">#</a> 加载 less</h4> <p>在这个踩了一个坑，记得安装 <code>less</code></p> <div class="language-npm extra-class"><pre class="language-text"><code>npm install --save-dev less-loader less
</code></pre></div><p>更改 antd 默认主题设置需要，不用的话应该把相应的设置忽略即可。</p> <div class="language-js extra-class"><pre class="language-js"><code>      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.less$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'style-loader'</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'css-loader'</span> <span class="token comment">// translates CSS into CommonJS</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'less-loader'</span><span class="token punctuation">,</span> <span class="token comment">// compiles Less to CSS</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              modifyVars<span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token string">'font-size-base'</span><span class="token operator">:</span> <span class="token string">'12px'</span><span class="token punctuation">,</span>
                <span class="token string">'primary-color'</span><span class="token operator">:</span> <span class="token string">'#0EA679'</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
              javascriptEnabled<span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
</code></pre></div><h4 id="加载字体"><a href="#加载字体" class="header-anchor">#</a> 加载字体</h4> <p>那么，像字体这样的其他资源如何处理呢？file-loader 和 url-loader 可以接收并加载任何文件，然后将其输出到构建目录。
这就是说，我们可以将它们用于任何类型的文件，包括字体。更新 <code>webpack.config.js</code> 来处理字体文件：</p> <div class="language-js extra-class"><pre class="language-js"><code>      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(woff|woff2|eot|ttf|otf)$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;file-loader&quot;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
</code></pre></div><h4 id="增加-htmlwebpackplugin"><a href="#增加-htmlwebpackplugin" class="header-anchor">#</a> 增加 HtmlWebpackPlugin</h4> <p>HtmlWebpackPlugin 作用是生成一个 HTML 模板。
HtmlWebpackPlugin 简化了 HTML 文件的创建，以便为你的 webpack 包提供服务。
这对于在文件名中包含每次会随着编译而发生变化哈希的 webpack bundle 尤其有用。</p> <p>你可以让插件为你生成一个 HTML 文件，使用 lodash 模板提供你自己的模板，或使用你自己的 loader
首先需要安装插件：</p> <div class="language-npm extra-class"><pre class="language-text"><code>npm install --save-dev html-webpack-plugin
</code></pre></div><p>在生产配置文件里添加</p> <div class="language-js extra-class"><pre class="language-js"><code> plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">'public/index.html'</span><span class="token punctuation">,</span>
      title<span class="token operator">:</span> <span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token comment">// 更改HTML的title的内容</span>
      favicon<span class="token operator">:</span> <span class="token string">'public/favicon.ico'</span><span class="token punctuation">,</span>
      minify<span class="token operator">:</span> <span class="token punctuation">{</span>
        removeComments<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeAttributeQuotes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="清理-dist-文件夹"><a href="#清理-dist-文件夹" class="header-anchor">#</a> 清理 /dist 文件夹</h3> <p>在每次构建前清理 /dist 文件夹.</p> <div class="language-npm extra-class"><pre class="language-text"><code>npm install clean-webpack-plugin --save-dev
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;../dist&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="模块热替换"><a href="#模块热替换" class="header-anchor">#</a> 模块热替换</h3> <blockquote><p><a href="https://webpack.docschina.org/guides/hot-module-replacement" target="_blank" rel="noopener noreferrer">https://webpack.docschina.org/guides/hot-module-replacement<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>模块热替换(Hot Module Replacement 或 HMR)是 webpack 提供的最有用的功能之一。它允许在运行时更新各种模块，而无需进行完全刷新。
有两种方式</p> <h4 id="一"><a href="#一" class="header-anchor">#</a> 一</h4> <ul><li>更改 package.json</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config build/webpack.dev.config.js --color --progress --hot&quot;</span>
</code></pre></div><ul><li>更改 index.js</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDom <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>

<span class="token operator">**</span><span class="token keyword">if</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token operator">**</span>
<span class="token comment">//增加</span>

</code></pre></div><h4 id="二"><a href="#二" class="header-anchor">#</a> 二</h4> <ul><li>更改配置文件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  hot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="redux"><a href="#redux" class="header-anchor">#</a> redux</h3> <blockquote><p><a href="https://www.redux.org.cn/" target="_blank" rel="noopener noreferrer">https://www.redux.org.cn/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>官方文档先给上，一开始学的时候也以为这个比较难，开始写就不会了。
网上看看例子，自己在 coding 一下就差不多了。</p> <p>这边用到了一个中间件 <code>redux-thunk</code></p> <div class="language-npm extra-class"><pre class="language-text"><code>npm install --save redux-thunk
</code></pre></div><p>附上写的代码</p> <h4 id="store"><a href="#store" class="header-anchor">#</a> store</h4> <p>注释的部分为生产环境使用。</p> <p>为了方便 debug 代码，在控制台打印 readux 日志。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// import { createStore, applyMiddleware } from 'redux';</span>
<span class="token comment">// import thunk from 'redux-thunk';</span>

<span class="token comment">// import rootReducer from './reducer';</span>

<span class="token comment">// const createStoreWithMiddleware = applyMiddleware(thunk)(createStore);</span>
<span class="token comment">// const store = createStoreWithMiddleware(rootReducer);</span>

<span class="token comment">// export default store;</span>

<span class="token comment">// 打印操作日志，方便调试，生产环境可以去掉，用上面注释的配置。</span>

<span class="token keyword">import</span> thunk <span class="token keyword">from</span> <span class="token string">&quot;redux-thunk&quot;</span><span class="token punctuation">;</span> <span class="token comment">// redux 作者开发的异步处理方案 可以在action 里传入 dispatch getState</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createLogger <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;redux-logger&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 利用redux-logger打印日志</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> applyMiddleware <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;redux&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 引入redux createStore、中间件及compose</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> composeWithDevTools <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;redux-devtools-extension&quot;</span><span class="token punctuation">;</span> <span class="token comment">// devToolsEnhancer,</span>
<span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">&quot;./reducer&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 引入reducers集合</span>

<span class="token comment">// 调用日志打印方法 collapsed是让action折叠，看着舒服点</span>
<span class="token keyword">const</span> loggerMiddleware <span class="token operator">=</span> <span class="token function">createLogger</span><span class="token punctuation">(</span><span class="token punctuation">{</span> collapsed<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建一个中间件集合</span>
<span class="token keyword">const</span> middleware <span class="token operator">=</span> <span class="token punctuation">[</span>thunk<span class="token punctuation">,</span> loggerMiddleware<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 创建store</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>
  reducer<span class="token punctuation">,</span>
  <span class="token function">composeWithDevTools</span><span class="token punctuation">(</span><span class="token function">applyMiddleware</span><span class="token punctuation">(</span><span class="token operator">...</span>middleware<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre></div><h4 id="action"><a href="#action" class="header-anchor">#</a> action</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">INCREMENT</span> <span class="token operator">=</span> <span class="token string">&quot;counter/INCREMENT&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">DECREMENT</span> <span class="token operator">=</span> <span class="token string">&quot;counter/DECREMENT&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">RESET</span> <span class="token operator">=</span> <span class="token string">&quot;counter/RESET&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token constant">INCREMENT</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">decrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token constant">DECREMENT</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token constant">RESET</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="reducer"><a href="#reducer" class="header-anchor">#</a> reducer</h4> <h5 id="每个页面的-reduce-文件"><a href="#每个页面的-reduce-文件" class="header-anchor">#</a> 每个页面的 reduce 文件</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">INCREMENT</span><span class="token punctuation">,</span> <span class="token constant">DECREMENT</span><span class="token punctuation">,</span> <span class="token constant">RESET</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../actions/counter&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> initState <span class="token operator">=</span> <span class="token punctuation">{</span>
  count<span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> initState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token constant">INCREMENT</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        count<span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">DECREMENT</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        count<span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">-</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">RESET</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="redecers-整合所有文件的-reducer"><a href="#redecers-整合所有文件的-reducer" class="header-anchor">#</a> redecers 整合所有文件的 reducer</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> combineReducers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;redux&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> counter <span class="token keyword">from</span> <span class="token string">&quot;./reducers/counter&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  counter
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="react-loadable"><a href="#react-loadable" class="header-anchor">#</a> react-loadable</h3> <blockquote><p><a href="https://github.com/jamiebuilds/react-loadable" target="_blank" rel="noopener noreferrer">https://github.com/jamiebuilds/react-loadable<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>官方文档先附上</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 加载页面</span>
<span class="token keyword">import</span> Loadable <span class="token keyword">from</span> <span class="token string">&quot;react-loadable&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Spin<span class="token punctuation">,</span> Icon <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;antd&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> antIcon <span class="token operator">=</span> <span class="token operator">&lt;</span>Icon type<span class="token operator">=</span><span class="token string">&quot;loading&quot;</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> fontSize<span class="token operator">:</span> <span class="token number">24</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> spin <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> antLong <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Icon type<span class="token operator">=</span><span class="token string">&quot;loading&quot;</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> fontSize<span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">&quot;red&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> spin <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> antError <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Icon type<span class="token operator">=</span><span class="token string">&quot;loading&quot;</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> fontSize<span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">&quot;red&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> spin <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">Loading</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Spin
        size<span class="token operator">=</span><span class="token string">&quot;large&quot;</span>
        tip<span class="token operator">=</span><span class="token string">&quot;加载错误 。。。&quot;</span>
        indicator<span class="token operator">=</span><span class="token punctuation">{</span>antError<span class="token punctuation">}</span>
        style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> position<span class="token operator">:</span> <span class="token string">&quot;absolute&quot;</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> top<span class="token operator">:</span> <span class="token string">&quot;40%&quot;</span><span class="token punctuation">,</span> left<span class="token operator">:</span> <span class="token string">&quot;50%&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>timedOut<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Spin
        size<span class="token operator">=</span><span class="token string">&quot;large&quot;</span>
        tip<span class="token operator">=</span><span class="token string">&quot;加载超时 。。。&quot;</span>
        indicator<span class="token operator">=</span><span class="token punctuation">{</span>antLong<span class="token punctuation">}</span>
        style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> position<span class="token operator">:</span> <span class="token string">&quot;absolute&quot;</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> top<span class="token operator">:</span> <span class="token string">&quot;40%&quot;</span><span class="token punctuation">,</span> left<span class="token operator">:</span> <span class="token string">&quot;50%&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>pastDelay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Spin
        size<span class="token operator">=</span><span class="token string">&quot;large&quot;</span>
        tip<span class="token operator">=</span><span class="token string">&quot;Loading 。。。&quot;</span>
        indicator<span class="token operator">=</span><span class="token punctuation">{</span>antError<span class="token punctuation">}</span>
        style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> position<span class="token operator">:</span> <span class="token string">&quot;absolute&quot;</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> top<span class="token operator">:</span> <span class="token string">&quot;40%&quot;</span><span class="token punctuation">,</span> left<span class="token operator">:</span> <span class="token string">&quot;50%&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">importPath</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> loader <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">Loadable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    loader<span class="token punctuation">,</span>
    loading<span class="token operator">:</span> Loading<span class="token punctuation">,</span>
    delay<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    timeout<span class="token operator">:</span> <span class="token number">10000</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="axios-统一拦截所有的请求和返回数据"><a href="#axios-统一拦截所有的请求和返回数据" class="header-anchor">#</a> axios 统一拦截所有的请求和返回数据</h3> <p>在需要用到的地方引入这个文件就 ok 了。只是简单的写了一个例子，后续再完善吧。axios 使用起来很简洁。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&quot;axios&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;antd&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> NProgress <span class="token keyword">from</span> <span class="token string">&quot;nprogress&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;nprogress/nprogress.css&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 拦截所有有请求与回复</span>
<span class="token comment">// Add a request interceptor</span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  <span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    NProgress<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> config<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;请求错误，请重试&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Add a response interceptor</span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  <span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// NProgress.done();</span>
    <span class="token comment">// if (response.data.RetCode === 101) {</span>
    <span class="token comment">//   message.error(response.data.Message);</span>
    <span class="token comment">//   return response;</span>
    <span class="token comment">// }</span>
    <span class="token comment">// if (response.data.RetCode === 100) {</span>
    <span class="token comment">//   message.error(response.data.Message);</span>
    <span class="token comment">//   return response;</span>
    <span class="token comment">// }</span>
    <span class="token keyword">return</span> response<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;请求错误，请重试&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    NProgress<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> request<span class="token punctuation">;</span>
</code></pre></div><h3 id="公共路径-public-path"><a href="#公共路径-public-path" class="header-anchor">#</a> 公共路径(public path)</h3> <h2 id="插件配置"><a href="#插件配置" class="header-anchor">#</a> 插件配置</h2> <div class="language-js extra-class"><pre class="language-js"><code>plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token comment">// 处理html</span>
  <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    template<span class="token operator">:</span> <span class="token string">&quot;public/index.html&quot;</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> <span class="token string">&quot;../public/index.html&quot;</span><span class="token punctuation">,</span>
    inject<span class="token operator">:</span> <span class="token string">&quot;body&quot;</span><span class="token punctuation">,</span>
    title<span class="token operator">:</span> <span class="token string">&quot;管理平台&quot;</span><span class="token punctuation">,</span>
    favicon<span class="token operator">:</span> <span class="token string">&quot;public/favicon.ico&quot;</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">&quot;index.html&quot;</span><span class="token punctuation">,</span>
    hash<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minify<span class="token operator">:</span> <span class="token punctuation">{</span>
      html5<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      removeComments<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      removeAttributeQuotes<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;../dist&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> allowExternal<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">BundleAnalyzerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    chunkFilename<span class="token operator">:</span> <span class="token string">&quot;[chunkhash].css&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HashedModuleIdsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllReferencePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    context<span class="token operator">:</span> __dirname<span class="token punctuation">,</span>
    manifest<span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;../dll/manifest.json&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">CopyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&quot;dll/Dll.js&quot;</span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token constant">DIST_PATH</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="html-webpack-plugin"><a href="#html-webpack-plugin" class="header-anchor">#</a> html-webpack-plugin</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">'public/index.html'</span><span class="token punctuation">,</span>
      path<span class="token operator">:</span> <span class="token string">'../public/index.html'</span><span class="token punctuation">,</span>
      inject<span class="token operator">:</span> <span class="token string">'body'</span><span class="token punctuation">,</span>
      title<span class="token operator">:</span> <span class="token string">'管理平台'</span><span class="token punctuation">,</span>
      favicon<span class="token operator">:</span> <span class="token string">'public/favicon.ico'</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
      hash<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      minify<span class="token operator">:</span> <span class="token punctuation">{</span>
        html5<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeComments<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeAttributeQuotes<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="copy-webpack-plugin"><a href="#copy-webpack-plugin" class="header-anchor">#</a> copy-webpack-plugin</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> CopyWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;copy-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">CopyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&quot;dll/Dll.js&quot;</span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token constant">DIST_PATH</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="clean-webpack-plugin"><a href="#clean-webpack-plugin" class="header-anchor">#</a> clean-webpack-plugin</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> CleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;clean-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;../dist&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> allowExternal<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="webpack-bundle-analyzer"><a href="#webpack-bundle-analyzer" class="header-anchor">#</a> webpack-bundle-analyzer</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> BundleAnalyzerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-bundle-analyzer'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span>BundleAnalyzerPlugin<span class="token punctuation">;</span>

  <span class="token keyword">new</span> <span class="token class-name">BundleAnalyzerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

</code></pre></div><h3 id="mini-css-extract-plugin"><a href="#mini-css-extract-plugin" class="header-anchor">#</a> mini-css-extract-plugin</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  chunkFilename<span class="token operator">:</span> <span class="token string">&quot;[chunkhash].css&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="附上三个配置文件"><a href="#附上三个配置文件" class="header-anchor">#</a> 附上三个配置文件</h2> <h3 id="webpack-dev-conf-js"><a href="#webpack-dev-conf-js" class="header-anchor">#</a> webpack.dev.conf.js</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CopyWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;copy-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">DIST_PATH</span> <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//生产目录</span>
<span class="token keyword">const</span> <span class="token constant">APP_PATH</span> <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//源文件目录</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    index<span class="token operator">:</span> <span class="token string">&quot;./src/index.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token constant">DIST_PATH</span><span class="token punctuation">,</span> <span class="token comment">//出口路径</span>
    filename<span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
    chunkFilename<span class="token operator">:</span> <span class="token string">&quot;js/[name].[chunkhash].js&quot;</span> <span class="token comment">//按需加载名称</span>
    <span class="token comment">// publicPath: &quot;./&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 源错误检查</span>
  devtool<span class="token operator">:</span> <span class="token string">&quot;inline-source-map&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">//模块配置</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(js|jsx)$/</span><span class="token punctuation">,</span>
        exclude<span class="token operator">:</span> <span class="token regex">/(node_modules|bower_components)/</span><span class="token punctuation">,</span> <span class="token comment">//排除</span>
        include<span class="token operator">:</span> <span class="token punctuation">[</span>
          path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../node_modules/antd/&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//包括</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              limit<span class="token operator">:</span> <span class="token number">8192</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(woff|woff2|eot|ttf|otf)$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;file-loader&quot;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">//更改antd主题设置</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.less$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;style-loader&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;css-loader&quot;</span> <span class="token comment">// translates CSS into CommonJS</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;less-loader&quot;</span><span class="token punctuation">,</span> <span class="token comment">// compiles Less to CSS</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              modifyVars<span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;font-size-base&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12px&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;primary-color&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#0EA679&quot;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
              javascriptEnabled<span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//插件</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">&quot;public/index.html&quot;</span><span class="token punctuation">,</span>
      path<span class="token operator">:</span> <span class="token string">&quot;../public/index.html&quot;</span><span class="token punctuation">,</span>
      inject<span class="token operator">:</span> <span class="token string">&quot;body&quot;</span><span class="token punctuation">,</span>
      favicon<span class="token operator">:</span> <span class="token string">&quot;public/favicon.ico&quot;</span><span class="token punctuation">,</span>
      title<span class="token operator">:</span> <span class="token string">&quot;管理平台&quot;</span><span class="token punctuation">,</span>
      overlay<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      minify<span class="token operator">:</span> <span class="token punctuation">{</span>
        html5<span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      hash<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 热更新</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HashedModuleIdsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllReferencePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      context<span class="token operator">:</span> __dirname<span class="token punctuation">,</span>
      manifest<span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;../dll/manifest.json&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&quot;dll/Dll.js&quot;</span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token constant">DIST_PATH</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 热更新</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    port<span class="token operator">:</span> <span class="token string">&quot;3300&quot;</span><span class="token punctuation">,</span>
    contentBase<span class="token operator">:</span> <span class="token constant">DIST_PATH</span><span class="token punctuation">,</span>
    historyApiFallback<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    hot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 开启</span>
    https<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    compress<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    noInfo<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// '/': {</span>
      <span class="token comment">//   target: '',</span>
      <span class="token comment">//   changeOrigin: true,</span>
      <span class="token comment">//   secure: false,</span>
      <span class="token comment">// },</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="webpack-dll-conf-js"><a href="#webpack-dll-conf-js" class="header-anchor">#</a> webpack.dll.conf.js</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;clean-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> vendors <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;antd&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;axios&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;nprogress&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;react-dom&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;react-loadable&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;react-redux&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;react-router&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;redux&quot;</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    vendor<span class="token operator">:</span> vendors
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../dll&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">&quot;Dll.js&quot;</span><span class="token punctuation">,</span>
    library<span class="token operator">:</span> <span class="token string">&quot;[name]_[hash]&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../dll&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;manifest.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">&quot;[name]_[hash]&quot;</span><span class="token punctuation">,</span>
      context<span class="token operator">:</span> __dirname
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;../dll&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> allowExternal<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="webpack-prod-conf-js"><a href="#webpack-prod-conf-js" class="header-anchor">#</a> webpack.prod.conf.js</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> CopyWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;copy-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;clean-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> BundleAnalyzerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack-bundle-analyzer&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span>BundleAnalyzerPlugin<span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">DIST_PATH</span> <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//生产目录</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    index<span class="token operator">:</span> <span class="token string">&quot;./src/index.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token constant">DIST_PATH</span><span class="token punctuation">,</span> <span class="token comment">//出口路径</span>
    filename<span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
    chunkFilename<span class="token operator">:</span> <span class="token string">&quot;[name]_[hash].js&quot;</span> <span class="token comment">//按需加载名称</span>
    <span class="token comment">// publicPath: './'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 源错误检查</span>
  devtool<span class="token operator">:</span> <span class="token string">&quot;source-map&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">//模块配置</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(js|jsx)$/</span><span class="token punctuation">,</span>
        exclude<span class="token operator">:</span> <span class="token regex">/(node_modules|bower_components)/</span><span class="token punctuation">,</span> <span class="token comment">//排除</span>
        include<span class="token operator">:</span> <span class="token punctuation">[</span>
          path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../node_modules/antd/&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//包括</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              limit<span class="token operator">:</span> <span class="token number">8192</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">//更改antd主题设置</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.less$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;style-loader&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;css-loader&quot;</span> <span class="token comment">// translates CSS into CommonJS</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;less-loader&quot;</span><span class="token punctuation">,</span> <span class="token comment">// compiles Less to CSS</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              modifyVars<span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;font-size-base&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12px&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;primary-color&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#0EA679&quot;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
              javascriptEnabled<span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(woff|woff2|eot|ttf|otf)$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;file-loader&quot;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//插件</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// 处理html</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">&quot;public/index.html&quot;</span><span class="token punctuation">,</span>
      path<span class="token operator">:</span> <span class="token string">&quot;../public/index.html&quot;</span><span class="token punctuation">,</span>
      inject<span class="token operator">:</span> <span class="token string">&quot;body&quot;</span><span class="token punctuation">,</span>
      title<span class="token operator">:</span> <span class="token string">&quot;管理平台&quot;</span><span class="token punctuation">,</span>
      favicon<span class="token operator">:</span> <span class="token string">&quot;public/favicon.ico&quot;</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span> <span class="token string">&quot;index.html&quot;</span><span class="token punctuation">,</span>
      hash<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      minify<span class="token operator">:</span> <span class="token punctuation">{</span>
        html5<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeComments<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeAttributeQuotes<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;../dist&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> allowExternal<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">BundleAnalyzerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      chunkFilename<span class="token operator">:</span> <span class="token string">&quot;[chunkhash].css&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HashedModuleIdsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllReferencePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      context<span class="token operator">:</span> __dirname<span class="token punctuation">,</span>
      manifest<span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;../dll/manifest.json&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&quot;dll/Dll.js&quot;</span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token constant">DIST_PATH</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
  <span class="token comment">// 热更新</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="学习过程中的踩坑"><a href="#学习过程中的踩坑" class="header-anchor">#</a> 学习过程中的踩坑</h2> <h3 id="生产环境打包报错"><a href="#生产环境打包报错" class="header-anchor">#</a> 生产环境打包报错</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token constant">ERROR</span> <span class="token keyword">in</span> Path must be a string<span class="token punctuation">.</span> Received <span class="token keyword">undefined</span>
Child html<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin <span class="token keyword">for</span> <span class="token string">&quot;index.html&quot;</span><span class="token operator">:</span>
     <span class="token number">1</span> asset
    Entrypoint <span class="token keyword">undefined</span> <span class="token operator">=</span> index<span class="token punctuation">.</span>html

</code></pre></div><p>这个错误不影响打包结果，应该是版本问题导致。</p> <blockquote><p><a href="https://github.com/jantimon/html-webpack-plugin/issues/895" target="_blank" rel="noopener noreferrer">https://github.com/jantimon/html-webpack-plugin/issues/895<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>写完才发现有些忘记记录了，会保持更新。</p> <p>学习的过程中也学习参考了其他优秀的博客和 github,以及文档。</p> <blockquote><p><a href="https://github.com/brickspert/blog/issues/1" target="_blank" rel="noopener noreferrer">https://github.com/brickspert/blog/issues/1<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> &gt;<a href="https://github.com/NewPrototype/webpack4-es6-react" target="_blank" rel="noopener noreferrer">https://github.com/NewPrototype/webpack4-es6-react<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> &gt;<a href="https://github.com/axios/axios" target="_blank" rel="noopener noreferrer">https://github.com/axios/axios<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> &gt;<a href="https://github.com/jamiebuilds/react-loadable" target="_blank" rel="noopener noreferrer">https://github.com/jamiebuilds/react-loadable<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> &gt;<a href="https://www.webpackjs.com/concepts/" target="_blank" rel="noopener noreferrer">https://www.webpackjs.com/concepts/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/17/2020, 10:18:07 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/qian-duan-gong-cheng-hua/" class="prev router-link-active">
        前端工程化
      </a></span> <span class="next"><a href="/qian-duan-gong-cheng-hua/webpack--jin-jie--nc/webpck--jie-shao.html">
        webpack 介绍
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><div class="reading-progress top" data-v-56679cca><div class="progress" data-v-56679cca></div></div><!----></div></div>
    <script src="/assets/js/app.d97aa468.js" defer></script><script src="/assets/js/2.b8ed37c3.js" defer></script><script src="/assets/js/125.b240ed72.js" defer></script>
  </body>
</html>
