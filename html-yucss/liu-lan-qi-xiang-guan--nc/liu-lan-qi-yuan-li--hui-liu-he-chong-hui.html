<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>浏览器原理-回流和重绘 | 深入前端学习</title>
    <meta name="description" content="前端进阶学习 JavaScript数据结构 前端工程化">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/icon.png">
    
    <link rel="preload" href="/assets/css/0.styles.eb71d6de.css" as="style"><link rel="preload" href="/assets/js/app.d97aa468.js" as="script"><link rel="preload" href="/assets/js/2.b8ed37c3.js" as="script"><link rel="preload" href="/assets/js/20.18e13265.js" as="script"><link rel="prefetch" href="/assets/js/10.b0fbc02d.js"><link rel="prefetch" href="/assets/js/100.685ae5d3.js"><link rel="prefetch" href="/assets/js/101.59d1e30a.js"><link rel="prefetch" href="/assets/js/102.a9bcb575.js"><link rel="prefetch" href="/assets/js/103.e9a27594.js"><link rel="prefetch" href="/assets/js/104.d5215480.js"><link rel="prefetch" href="/assets/js/105.ba47f600.js"><link rel="prefetch" href="/assets/js/106.2813c78b.js"><link rel="prefetch" href="/assets/js/107.4d85a99f.js"><link rel="prefetch" href="/assets/js/108.746d42dc.js"><link rel="prefetch" href="/assets/js/109.e1e7eac5.js"><link rel="prefetch" href="/assets/js/11.89d2dd9d.js"><link rel="prefetch" href="/assets/js/110.b84ad071.js"><link rel="prefetch" href="/assets/js/111.be521518.js"><link rel="prefetch" href="/assets/js/112.c5f3ecf2.js"><link rel="prefetch" href="/assets/js/113.ac6eb011.js"><link rel="prefetch" href="/assets/js/114.26fb9e49.js"><link rel="prefetch" href="/assets/js/115.6868f2b3.js"><link rel="prefetch" href="/assets/js/116.785f4db8.js"><link rel="prefetch" href="/assets/js/117.bd2cabf4.js"><link rel="prefetch" href="/assets/js/118.d97ae399.js"><link rel="prefetch" href="/assets/js/119.c4048771.js"><link rel="prefetch" href="/assets/js/12.e4cc17b5.js"><link rel="prefetch" href="/assets/js/120.d1ea8260.js"><link rel="prefetch" href="/assets/js/121.928a203a.js"><link rel="prefetch" href="/assets/js/122.72894fa4.js"><link rel="prefetch" href="/assets/js/123.2d6925fa.js"><link rel="prefetch" href="/assets/js/124.4bdcc56e.js"><link rel="prefetch" href="/assets/js/125.b240ed72.js"><link rel="prefetch" href="/assets/js/126.e8210ef2.js"><link rel="prefetch" href="/assets/js/127.90cda23d.js"><link rel="prefetch" href="/assets/js/128.1c78db7d.js"><link rel="prefetch" href="/assets/js/129.403aee79.js"><link rel="prefetch" href="/assets/js/13.b78d5fb2.js"><link rel="prefetch" href="/assets/js/130.9138708f.js"><link rel="prefetch" href="/assets/js/131.6f81fb6c.js"><link rel="prefetch" href="/assets/js/132.f1f66b6b.js"><link rel="prefetch" href="/assets/js/133.6c00ecd2.js"><link rel="prefetch" href="/assets/js/134.0f1cfc85.js"><link rel="prefetch" href="/assets/js/135.0458c13e.js"><link rel="prefetch" href="/assets/js/136.82db2f57.js"><link rel="prefetch" href="/assets/js/137.744d25fb.js"><link rel="prefetch" href="/assets/js/138.ae30d999.js"><link rel="prefetch" href="/assets/js/139.6aba53d1.js"><link rel="prefetch" href="/assets/js/14.b42e94f3.js"><link rel="prefetch" href="/assets/js/140.4d922eac.js"><link rel="prefetch" href="/assets/js/141.f590e842.js"><link rel="prefetch" href="/assets/js/142.cd20ae34.js"><link rel="prefetch" href="/assets/js/143.3420d1b6.js"><link rel="prefetch" href="/assets/js/144.fcb5e2d0.js"><link rel="prefetch" href="/assets/js/145.c84cdbfc.js"><link rel="prefetch" href="/assets/js/146.4d387e18.js"><link rel="prefetch" href="/assets/js/147.536309ca.js"><link rel="prefetch" href="/assets/js/15.92eba5b1.js"><link rel="prefetch" href="/assets/js/16.8c2832cb.js"><link rel="prefetch" href="/assets/js/17.bb7047e5.js"><link rel="prefetch" href="/assets/js/18.37d50f55.js"><link rel="prefetch" href="/assets/js/19.9c2a5d3d.js"><link rel="prefetch" href="/assets/js/21.4c2b2be5.js"><link rel="prefetch" href="/assets/js/22.3be056b6.js"><link rel="prefetch" href="/assets/js/23.b86e836f.js"><link rel="prefetch" href="/assets/js/24.22693865.js"><link rel="prefetch" href="/assets/js/25.c84ceb92.js"><link rel="prefetch" href="/assets/js/26.3bbbc299.js"><link rel="prefetch" href="/assets/js/27.28742116.js"><link rel="prefetch" href="/assets/js/28.d24e2669.js"><link rel="prefetch" href="/assets/js/29.7726e760.js"><link rel="prefetch" href="/assets/js/3.db315dd8.js"><link rel="prefetch" href="/assets/js/30.3579f6a8.js"><link rel="prefetch" href="/assets/js/31.bd027530.js"><link rel="prefetch" href="/assets/js/32.5b726e59.js"><link rel="prefetch" href="/assets/js/33.68530bc9.js"><link rel="prefetch" href="/assets/js/34.126a2ae6.js"><link rel="prefetch" href="/assets/js/35.251c4687.js"><link rel="prefetch" href="/assets/js/36.67e141a8.js"><link rel="prefetch" href="/assets/js/37.a2314517.js"><link rel="prefetch" href="/assets/js/38.a11ede48.js"><link rel="prefetch" href="/assets/js/39.3b7062d3.js"><link rel="prefetch" href="/assets/js/4.bee55229.js"><link rel="prefetch" href="/assets/js/40.485cda16.js"><link rel="prefetch" href="/assets/js/41.ef2f00a4.js"><link rel="prefetch" href="/assets/js/42.2fcba9a8.js"><link rel="prefetch" href="/assets/js/43.a56d6409.js"><link rel="prefetch" href="/assets/js/44.8fa34dd4.js"><link rel="prefetch" href="/assets/js/45.599c1832.js"><link rel="prefetch" href="/assets/js/46.aa317726.js"><link rel="prefetch" href="/assets/js/47.0dcef552.js"><link rel="prefetch" href="/assets/js/48.e93bbc24.js"><link rel="prefetch" href="/assets/js/49.c93cd259.js"><link rel="prefetch" href="/assets/js/5.d2697518.js"><link rel="prefetch" href="/assets/js/50.d177bd7c.js"><link rel="prefetch" href="/assets/js/51.229a8cf5.js"><link rel="prefetch" href="/assets/js/52.56c1077e.js"><link rel="prefetch" href="/assets/js/53.0c7ed22b.js"><link rel="prefetch" href="/assets/js/54.09d6218c.js"><link rel="prefetch" href="/assets/js/55.3fb26d1d.js"><link rel="prefetch" href="/assets/js/56.285a3681.js"><link rel="prefetch" href="/assets/js/57.1706492c.js"><link rel="prefetch" href="/assets/js/58.fd62bdd2.js"><link rel="prefetch" href="/assets/js/59.4da5b13b.js"><link rel="prefetch" href="/assets/js/6.36fa39fd.js"><link rel="prefetch" href="/assets/js/60.27cb5d2e.js"><link rel="prefetch" href="/assets/js/61.e011772a.js"><link rel="prefetch" href="/assets/js/62.38aedaaf.js"><link rel="prefetch" href="/assets/js/63.98c2a33a.js"><link rel="prefetch" href="/assets/js/64.d3e75daa.js"><link rel="prefetch" href="/assets/js/65.9f2e9db6.js"><link rel="prefetch" href="/assets/js/66.81c476bd.js"><link rel="prefetch" href="/assets/js/67.2779a28e.js"><link rel="prefetch" href="/assets/js/68.8b6a13c9.js"><link rel="prefetch" href="/assets/js/69.c4f8c7eb.js"><link rel="prefetch" href="/assets/js/7.f222a103.js"><link rel="prefetch" href="/assets/js/70.6d8d9eae.js"><link rel="prefetch" href="/assets/js/71.ed91af88.js"><link rel="prefetch" href="/assets/js/72.8d71392a.js"><link rel="prefetch" href="/assets/js/73.ca4057b9.js"><link rel="prefetch" href="/assets/js/74.46c4f123.js"><link rel="prefetch" href="/assets/js/75.7863258d.js"><link rel="prefetch" href="/assets/js/76.115088e5.js"><link rel="prefetch" href="/assets/js/77.1a327075.js"><link rel="prefetch" href="/assets/js/78.c2298758.js"><link rel="prefetch" href="/assets/js/79.0a9f8f83.js"><link rel="prefetch" href="/assets/js/8.944513ba.js"><link rel="prefetch" href="/assets/js/80.31c21877.js"><link rel="prefetch" href="/assets/js/81.814e5c34.js"><link rel="prefetch" href="/assets/js/82.23fc2de5.js"><link rel="prefetch" href="/assets/js/83.18e43aa8.js"><link rel="prefetch" href="/assets/js/84.56eeaefd.js"><link rel="prefetch" href="/assets/js/85.2802cf7e.js"><link rel="prefetch" href="/assets/js/86.553e6872.js"><link rel="prefetch" href="/assets/js/87.6bb9f1f5.js"><link rel="prefetch" href="/assets/js/88.2655130a.js"><link rel="prefetch" href="/assets/js/89.6be9a833.js"><link rel="prefetch" href="/assets/js/9.994351b2.js"><link rel="prefetch" href="/assets/js/90.a66e656f.js"><link rel="prefetch" href="/assets/js/91.27408d28.js"><link rel="prefetch" href="/assets/js/92.8b3bf2f2.js"><link rel="prefetch" href="/assets/js/93.587e74cf.js"><link rel="prefetch" href="/assets/js/94.23984853.js"><link rel="prefetch" href="/assets/js/95.365bca71.js"><link rel="prefetch" href="/assets/js/96.60b49af2.js"><link rel="prefetch" href="/assets/js/97.cc728fc4.js"><link rel="prefetch" href="/assets/js/98.d666ccff.js"><link rel="prefetch" href="/assets/js/99.b011d256.js">
    <link rel="stylesheet" href="/assets/css/0.styles.eb71d6de.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">深入前端学习</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/html-yucss/" class="nav-link router-link-active">
  Html与css
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/javascript-jin-jie/" class="nav-link">
  Javascript进阶
</a></div><div class="nav-item"><a href="/http/" class="nav-link">
  Http
</a></div><div class="nav-item"><a href="/qian-duan-gong-cheng-hua/" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="/qi-ta/" class="nav-link">
  其他
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/html-yucss/" class="nav-link router-link-active">
  Html与css
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/javascript-jin-jie/" class="nav-link">
  Javascript进阶
</a></div><div class="nav-item"><a href="/http/" class="nav-link">
  Http
</a></div><div class="nav-item"><a href="/qian-duan-gong-cheng-hua/" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="/qi-ta/" class="nav-link">
  其他
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/html-yucss/" class="sidebar-link">HTML CSS 浏览器</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Html总结</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/html-yucss/html-zong-jie--nc/jin-du-tiao.html" class="sidebar-link">进度条实现</a></li><li><a href="/html-yucss/html-zong-jie--nc/dom-cao-zuo-fang-fa-hui-zong.html" class="sidebar-link">DOM 原生操作的方法</a></li><li><a href="/html-yucss/html-zong-jie--nc/bfc-xiang-guan.html" class="sidebar-link">BFC 块级的格式化上下文</a></li><li><a href="/html-yucss/html-zong-jie--nc/dom-yuan-su-de-da-xiao.html" class="sidebar-link">DOM 元素大小</a></li><li><a href="/html-yucss/html-zong-jie--nc/dom-cha-zhao.html" class="sidebar-link">DOM-查找元素</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Css</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/html-yucss/css--nc/css-chang-du-dan-wei.html" class="sidebar-link">CSS-长度单位</a></li><li><a href="/html-yucss/css--nc/flex-bu-ju.html" class="sidebar-link">CSS-Flex 布局</a></li><li><a href="/html-yucss/css--nc/grid-bu-ju.html" class="sidebar-link">CSS-Grid布局</a></li><li><a href="/html-yucss/css--nc/shui-ping-chui-zhi-ju-zhong.html" class="sidebar-link">水平垂直居中</a></li><li><a href="/html-yucss/css--nc/yuan-su-yin-cang.html" class="sidebar-link">元素隐藏</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>浏览器相关</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/html-yucss/liu-lan-qi-xiang-guan--nc/liu-lan-qistorge-xue-xi.html" class="sidebar-link">JavaScript-浏览器 Storge</a></li><li><a href="/html-yucss/liu-lan-qi-xiang-guan--nc/liu-lan-qi-yuan-li--jie-shao.html" class="sidebar-link">浏览器原理-介绍</a></li><li><a href="/html-yucss/liu-lan-qi-xiang-guan--nc/liu-lan-qi-yuan-li--xuan-ran.html" class="sidebar-link">浏览器原理-渲染过程</a></li><li><a href="/html-yucss/liu-lan-qi-xiang-guan--nc/liu-lan-qi-yuan-li-css-jie-xi.html" class="sidebar-link">浏览器原理-CSS 解析</a></li><li><a href="/html-yucss/liu-lan-qi-xiang-guan--nc/liu-lan-qi-yuan-li--hui-liu-he-chong-hui.html" class="active sidebar-link">浏览器原理-回流和重绘</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/html-yucss/liu-lan-qi-xiang-guan--nc/liu-lan-qi-yuan-li--hui-liu-he-chong-hui.html#回流-reflow" class="sidebar-link">回流 Reflow</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/html-yucss/liu-lan-qi-xiang-guan--nc/liu-lan-qi-yuan-li--hui-liu-he-chong-hui.html#何时回流" class="sidebar-link">何时回流</a></li></ul></li><li class="sidebar-sub-header"><a href="/html-yucss/liu-lan-qi-xiang-guan--nc/liu-lan-qi-yuan-li--hui-liu-he-chong-hui.html#重绘-repaints" class="sidebar-link">重绘 Repaints</a></li><li class="sidebar-sub-header"><a href="/html-yucss/liu-lan-qi-xiang-guan--nc/liu-lan-qi-yuan-li--hui-liu-he-chong-hui.html#浏览器优化" class="sidebar-link">浏览器优化</a></li><li class="sidebar-sub-header"><a href="/html-yucss/liu-lan-qi-xiang-guan--nc/liu-lan-qi-yuan-li--hui-liu-he-chong-hui.html#减少重绘与回流" class="sidebar-link">减少重绘与回流</a></li><li class="sidebar-sub-header"><a href="/html-yucss/liu-lan-qi-xiang-guan--nc/liu-lan-qi-yuan-li--hui-liu-he-chong-hui.html#display-none-与-visibility-hidden" class="sidebar-link">display:none 与 visibility:hidden</a></li></ul></li><li><a href="/html-yucss/liu-lan-qi-xiang-guan--nc/liu-lan-qi-yuan-li--huan-cun-ji-zhi.html" class="sidebar-link">浏览器原理-缓存机制</a></li><li><a href="/html-yucss/liu-lan-qi-xiang-guan--nc/liu-lan-qi-yuan-li-url-dao-ye-mian-de-guo-cheng.html" class="sidebar-link">浏览器原理-URL 到页面过程</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="浏览器原理-回流和重绘"><a href="#浏览器原理-回流和重绘" class="header-anchor">#</a> 浏览器原理-回流和重绘</h1> <h2 id="回流-reflow"><a href="#回流-reflow" class="header-anchor">#</a> 回流 Reflow</h2> <p>当 <code>render tree</code>中的一部分(或全部)，因为元素的规模尺寸、布局、隐藏等改变
而需要重新构建，这就是回流(<code>reflow</code>)</p> <p>将可见DOM节点以及它对应的样式结合起来，可是我们还需要计算它们在设备视口(<code>viewport</code>)内的确切位置和大小，这个计算的阶段就是回流</p> <ul><li>每个页面至少回流一次，即页面首次加载</li> <li>回流时，浏览器会使渲染树中受到影响的部分失效，并重新构造这部分渲染树</li> <li>回流完成后，浏览器会重新绘制受影响的部分，是重绘过程</li></ul> <h3 id="何时回流"><a href="#何时回流" class="header-anchor">#</a> 何时回流</h3> <ul><li>调整窗口大小（Resizing the window）</li> <li>改变字体（Changing the font）</li> <li>增加或者移除样式表（Adding or removing a stylesheet）</li> <li>内容变化，比如用户在input框中输入文字（Content changes, such as a user typing text in an input box）</li> <li>激活 CSS 伪类，比如 :hover (IE 中为兄弟结点伪类的激活)（Activation of CSS pseudo classes such as :hover (in IE the activation of the pseudo class of a sibling)）</li> <li>操作 class 属性（Manipulating the class attribute）</li> <li>脚本操作 DOM（A script manipulating the DOM）</li> <li>计算 offsetWidth 和 offsetHeight 属性（Calculating offsetWidth and offsetHeight）</li> <li>设置 style 属性的值 （Setting a property of the style attribute）</li></ul> <h2 id="重绘-repaints"><a href="#重绘-repaints" class="header-anchor">#</a> 重绘 Repaints</h2> <p>当<code>render tree</code>中的一些元素需要更新属性，而这些属性只是影响元素的外
观、风格，而不影响布局(例如：<code>background-color</code>)，则称为重绘(<code>repaints</code>)</p> <p>特点：回流必将引起重绘，重绘不一定引起回流 回流比重绘的代价更高</p> <p><img src="https://segmentfault.com/img/remote/1460000017329984?w=1150&amp;h=537" alt="img"></p> <h2 id="浏览器优化"><a href="#浏览器优化" class="header-anchor">#</a> 浏览器优化</h2> <p>现代浏览器大多都是通过队列机制来批量更新布局，浏览器会把修改操作放在队列中，至少一个浏览器刷新（即16.6ms）才会清空队列，但当你获取布局信息的时候，队列中可能有会影响这些属性或方法返回值的操作，即使没有，浏览器也会强制清空队列，触发回流与重绘来确保返回正确的值。</p> <p>主要包括以下属性或方法：</p> <ul><li>offsetTop、offsetLeft、offsetWidth、offsetHeight</li> <li>scrollTop、scrollLeft、scrollWidth、scrollHeight</li> <li>clientTop、clientLeft、clientWidth、clientHeight</li> <li>width、height</li> <li>getComputedStyle()</li> <li>getBoundingClientRect()</li></ul> <p>所以，我们应该避免频繁的使用上述的属性，他们都会强制渲染刷新队列。</p> <h2 id="减少重绘与回流"><a href="#减少重绘与回流" class="header-anchor">#</a> 减少重绘与回流</h2> <ul><li><p>使用 transform 替代 top</p></li> <li><p>使用 visibility 替换 display: none ，因为前者只会引起重绘，后者会引发回流（改变了布局</p></li> <li><p>避免使用table布局，可能很小的一个小改动会造成整个 table 的重新布局。</p></li> <li><p>尽可能在DOM树的最末端改变class，回流是不可避免的，但可以减少其影响。尽可能在DOM树的最末端改变class，可以限制了回流的范围，使其影响尽可能少的节点。</p></li> <li><p>避免设置多层内联样式，CSS 选择符从右往左匹配查找，避免节点层级过多。</p></li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">span</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">div &gt; a &gt; span</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><ul><li><p>对于第一种设置样式的方式来说，浏览器只需要找到页面中所有的 span 标签然后设置颜色，但是对于第二种设置样式的方式来说，浏览器首先需要找到所有的 <code>span</code> 标签，然后找到 <code>span</code> 标签上的 <code>a</code> 标签，最后再去找到 <code>div</code> 标签，然后给符合这种条件的 <code>span</code> 标签设置颜色，这样的递归过程就很复杂。所以我们应该尽可能的避免写过于具体的 <code>CSS</code> 选择器，然后对于 <code>HTML</code> 来说也尽量少的添加无意义标签，保证层级扁平。</p></li> <li><p>将动画效果应用到<code>position</code>属性为<code>absolute</code>或<code>fixed</code>的元素上，避免影响其他元素的布局，这样只是一个重绘，而不是回流，同时，控制动画速度可以选择 <code>requestAnimationFrame</code>，详见探讨 <code>requestAnimationFrame</code>.</p></li> <li><p>避免使用CSS表达式，可能会引发回流。</p></li> <li><p>将频繁重绘或者回流的节点设置为图层，图层能够阻止该节点的渲染行为影响别的节点，例如<code>will-change、video、iframe</code>等标签，浏览器会自动将该节点变为图层。</p></li> <li><p>CSS3 硬件加速（GPU加速），使用css3硬件加速，可以让transform、opacity、filters这些动画不会引起回流重绘 。但是对于动画的其它属性，比如background-color这些，还是会引起回流重绘的，不过它还是可以提升这些动画的性能。</p></li> <li><p>JavaScript 避免频繁操作样式，最好一次性重写style属性，或者将样式列表定义为class并一次性更改class属性。</p></li> <li><p>避免频繁操作DOM，创建一个documentFragment，在它上面应用所有DOM操作，最后再把它添加到文档中。</p></li> <li><p>避免频繁读取会引发回流/重绘的属性，如果确实需要多次使用，就用一个变量缓存起来。</p></li> <li><p>对具有复杂动画的元素使用绝对定位，使它脱离文档流，否则会引起父元素及后续元素频繁回流。</p></li></ul> <h2 id="display-none-与-visibility-hidden"><a href="#display-none-与-visibility-hidden" class="header-anchor">#</a> display:none 与 visibility:hidden</h2> <p><code>display:none</code>与 <code>visibility:hidden</code> 的异同
两者都可以在页面上隐藏节点。不同之处在于，</p> <p><code>display:none</code> 隐藏后的元素不占据任何空间。它的宽度、高度等各种属性值都将“丢失”
<code>visibility:hidden</code> 隐藏的元素空间依旧存在。它仍具有高度、宽度等属性值</p> <p>从性能的角度而言，即是回流与重绘的方面，</p> <p><code>display:none</code> 会触发 <code>reflow（回流）</code> <code>visibility:hidden</code> 只会触发 repaint（重绘），因为没有发现位置变化
他们两者在优化中 <code>visibility:hidden</code> 会显得更好，因为我们不会因为它而去改变了文档中已经定义好的显示层次结构了。</p> <p>对子元素的影响：</p> <p><code>display:none</code> 一旦父节点元素应用了 <code>display:none</code>，父节点及其子孙节点元素全部不可见，而且无论其子孙元素如何设置 <code>display</code> 值都无法显示；</p> <p><code>visibility:hidden</code> 一旦父节点元素应用了 <code>visibility:hidden</code>，则其子孙后代也都会全部不可见。不过存在隐藏“失效”的情况。当其子孙元素应用了 <code>visibility:visible</code></p> <blockquote><p><a href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/render-tree-construction?hl=zh-cn" target="_blank" rel="noopener noreferrer">https://developers.google.com/web/fundamentals/performance/critical-rendering-path/render-tree-construction?hl=zh-cn<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/17/2020, 10:18:07 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/html-yucss/liu-lan-qi-xiang-guan--nc/liu-lan-qi-yuan-li-css-jie-xi.html" class="prev">
        浏览器原理-CSS 解析
      </a></span> <span class="next"><a href="/html-yucss/liu-lan-qi-xiang-guan--nc/liu-lan-qi-yuan-li--huan-cun-ji-zhi.html">
        浏览器原理-缓存机制
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><div class="reading-progress top" data-v-56679cca><div class="progress" data-v-56679cca></div></div><!----></div></div>
    <script src="/assets/js/app.d97aa468.js" defer></script><script src="/assets/js/2.b8ed37c3.js" defer></script><script src="/assets/js/20.18e13265.js" defer></script>
  </body>
</html>
